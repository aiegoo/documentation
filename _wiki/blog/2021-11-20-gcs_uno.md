---
layout: post
title: "GCS uno server docs"
name: "gcs_uno"
tags: [gcs]
tagName: gcs
permalink: 2021-11-20-gcs_uno.html
sidebar: other_sidebar
folder: blog
collection: wiki
categories: drone
keywords: "drone, gcs"
summary: "Sat, Nov 20, 21, this guide will hoep to intall GCS uno server app along with NodeJs, Reds and RethingDB"
excerpt_separator: <!--more-->
toc: true
public: true
parent: [[Wiki-Setting-Category]]
date: 2021-11-20T17:37:52 +0900
updated: 2021-11-20 17:37
---
* TOC
{:toc}

{{site.data.alerts.callout_warning}}This is a draft, the content is not complete and of poor quality!{{site.data.alerts.end}}

## gcs uno
## About GCS uno server
### basic installation
This guide will help you to install GCS.uno server app along with NodeJS, Redis Server and RethinkDB on Ubuntu 16.04 server.

If you don't have one, get it from Google Cloud, AWS, Digital Ocean or any other provider.
A server with 1 CPU, 1Gb RAM and 10Gb of hard drive will fit for testing.

You can also use VirtualBox with your desktop or laptop PC or even Raspberry Pi or similar card-size computers.

You will need SSH access to your server. Login and be ready to copy-paste below commands.

{{site.data.alerts.callout_info}}
GCS.uno server can be deployed on any system (Linux, MacOS, Windows). Check the original installation guides of the mentioned components on how to install on your favourite OS.
{{site.data.alerts.end}}

{{site.data.alerts.callout_warning}}
If you set up a server with cloud providers, check network firewall rules to allow access to UDP and TCP ports for telemetry and video streaming.
By default GCS.uno server uses UDP and TCP ports from 30000 to 65000 for telemetry, and TCP ports 554, 1935, 8081 for video streaming.
{{site.data.alerts.end}}

- system update

```shell
sudo apt-get update && sudo apt-get upgrade -y
```

- install helpers
```shell
sudo apt-get install curl git
```

- install nodejs
```shell
curl -sL https://deb.nodesource.com/setup_11.x | sudo -E bash -
```

```shell
sudo apt-get install -y nodejs build-essential
```

- install pm2 process manager

```shell
sudo npm install pm2 -g
```

-Install RethinkDB

```shell
source /etc/lsb-release && echo "deb http://download.rethinkdb.com/apt $DISTRIB_CODENAME main" | sudo tee /etc/apt/sources.list.d/rethinkdb.list
```

```shell
wget -qO- https://download.rethinkdb.com/apt/pubkey.gpg | sudo apt-key add -
```


```shell
sudo apt-get update && sudo apt-get install rethinkdb -y
```

- install Redis server
```shell
sudo apt-get install redis-server -y
```

### install GCS uno server app

```shell
sudo chown -R $USER:$GROUP ~/.npm
```


```shell
sudo chown -R $USER:$GROUP ~/.config
```
CD to you home directory if you are out of it

```shell
cd
```
Clone GCS.uno server repository

```shell
git clone https://github.com/GCS-uno/gcs_uno_server.git
```

CD to project's directory:

```shell
cd gcs_uno_server
```

Install app dependencies

```shell
npm install
```

Build front-end files
```shell
npm run build
```


## Setup your server
### Setting up RethinkDb database
Create RethinkDB instance config file

```shell
sudo cp config_templates/RethinkDB/gcs_uno_server.conf /etc/rethinkdb/instances.d/gcs_uno_server.conf
```

Create database instance directory

```shell
sudo rethinkdb create -d /var/lib/rethinkdb/gcs_uno_server
```


```shell
sudo chown -R rethinkdb.rethinkdb /var/lib/rethinkdb/gcs_uno_server
```


```shell
sudo /etc/init.d/rethinkdb start
```


```shell
sudo /etc/init.d/rethinkdb status
```

### Redis Server configuration

Redis Server does not need any additional configuration. Just check if it runs:
```shell
sudo systemctl status redis
```

If you really need to change its configuration, the config file is here: `/etc/redis/redis.conf`

### Google Maps API Key¶

GCS.uno server uses Google Maps API for front-end maps and backend geocoding lookups, so you need to obtain your API key in order to use it. Here is the original guide of how to get [Google Maps API key](https://developers.google.com/maps/documentation/javascript/get-api-key).

After you have your API key, you need to put it in to files. Open index.html in gcs_uno_server/pilot-ui, find YOUR_API_KEY sting and replace it with your own key.


```shell
nano pilot-ui/index.html
```
Open `server_config.js` from configs directory and put your key in a GMAPS_API_KEY property:

```shell
nano configs/server_config.js
```

### Start app servers¶

First, cd to servers directory
```shell
cd ~/gcs_uno_server/servers
```
Then start application servers one by one with PM2 process manager.

```shell
pm2 start drones-server.js
```


```shell
pm2 start drone-udp-server.js
```


```shell
pm2 start gcs-tcp-server.js
```


```shell
pm2 start ui-server.js
```

### Setup servers autostart on system boot¶

```shell
pm2 startup
```

### Open dashboard¶

Open your browser and go to http://YOUR_SERVER_IP:8080

[Video streaming server installation]()
[Advanced Installation (Custom domain with SSL)]()
[GCS.uno server dashboard overview]()

### advanced installation
If you want to use regular HTTP ports (80 and 443) for your server and/or assign a custom domain, you can install Nginx server and configure it as a reverse proxy with free SSL certificates from LetsEncrypt.


Install Nginx web server¶

```shell
sudo apt-get install nginx -y
# install LetsEncrypt certobx for nginx
sudo apt-get install software-properties-common -y
sudo apt-get update && sudo apt-get install python-certbot-nginx -y
```

Configure Ngnix¶


```shell
# Create new config file with your domain name. Replace GCS.EXAMPLE.COM with yours
sudo cp config_templates/Nginx/example_site.conf /etc/nginx/sites-available/GCS.EXAMPLE.COM
# Open it and set your domain name and root directory
sudo nano /etc/nginx/sites-available/GCS.EXAMPLE.COM
sudo ln -s /etc/nginx/sites-available/GCS.EXAMPLE.COM /etc/nginx/sites-enabled/GCS.EXAMPLE.COM
# Create SSL certificate for your domain¶
sudo certbot --nginx
```
Choose your site in console dialog, then wait a minute while your certificate is created and domain name checked. At the end of process you will be prompted to choose whether to make redirection in config file or not. Press 1 (No redirect) and Enter, because our config file already has redirection instructions.
Check your Nginx site config (from the steps above) if there are two lines with paths to certificate files at the end of file.
LetsEncrypt makes 3 months valid SSL certificate and sets itself to a cronjob to automatically renew it, so there is no need to do anything with it. But if you want to renew it manually, run this command:
```shell
sudo certbot renew --dry-run
```


```shell

```


```shell

```


```shell

```



```shell

```



```shell

```



```shell

```

## Live video streaming

## connect your drones

## fly your drone

## Flights history

## Missions

## Use cases

## How tos

## refs

{% include taglogic.html %}

{% include links.html %}

{% include commento.html %}

{{site.data.alerts.hr_shaded}}
